# This file contains the fastlane.tools configuration
# You can find the documentation at https://docs.fastlane.tools
#
# For a list of all available actions, check out
#
#     https://docs.fastlane.tools/actions
#
# For a list of all available plugins, check out
#
#     https://docs.fastlane.tools/plugins/available-plugins
#

# Uncomment the line if you want fastlane to automatically update itself
# update_fastlane

default_platform(:ios)

xcversion(version: "9.4.1")

platform :ios do

  before_all do
    if File.exist?("../Podfile")
      cocoapods(try_repo_update_on_error: true)
    end
    ENV["HOCKEY_TAGS"] = ENV["HOCKEY_TAGS"] || "dev" # Default builds only visible to "dev" tag on hockey.
    sh '[[ -f ../scratch.xcconfig ]] || cd .. && echo "No scratch config, generating empty file" && echo "# Empty scratch config (autogenerated)" >> scratch.xcconfig'
  end

  desc "Build and run the tests, even thought they do nothing. Good to know we can build and test with the simulator"
  lane :test do
    scan
  end
end
